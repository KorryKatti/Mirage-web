<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>MIRAGE Interface // V-0.0.4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="scanlines">
  <!-- Mobile menu toggle button (hidden on desktop) -->
  <button class="menu-toggle" id="menuToggle" style="display:none;">‚ò∞</button>

  <div class="sidebar" id="sidebar">
    <div class="logo">
      <img src="img/logo.png" height="100px" width="100px" alt="MIRAGE Logo" />
    </div>
    <div class="user-info">
      <p>Welcome, <span id="username">User</span></p>
      <p class="status-indicator">‚óâ ONLINE</p>
    </div>
    <nav>
      <ul>
        <li><a href="./fyp.html"><span class="nav-icon">‚åÇ</span> Explore</a></li>
        <li><a href="./room.html" class="active"><span class="nav-icon">üí¨</span> Room</a></li>
        <li><a id="profileLink"><span class="nav-icon">üë§</span> Profile</a></li>
        <li><a href="./settings.html"><span class="nav-icon">‚öôÔ∏è</span> Settings</a></li>
        <li><a href="./messages.html"><span class="nav-icon">üìß</span> Relay <span id="inboxCount" class="inbox-badge"
              style="display: none;"></span></a></li>
      </ul>
    </nav>

    <div class="room-selector">
      <div class="section-header">CHANNELS <span class="expand-icon" id="toggleRooms">‚ñº</span></div>
      <ul id="roomList" class="room-list">
        <!-- Rooms will be populated here -->
      </ul>
    </div>
    <!-- Add this to the sidebar, after the room-selector div -->
    <div class="room-details" id="roomDetails">
      <div class="section-header">ROOM INFO</div>
      <div id="roomInfoContent">
        <p>Room: <span id="currentRoomNameDisplay">Loading...</span></p>
        <p>Members: <span id="roomMemberCount">Loading...</span></p>
        <p>Type: <span id="roomType">Loading...</span></p>
        <button id="roomMembersBtn" class="room-settings-btn">View Members</button>
      </div>
    </div>

    <div class="sidebar-footer">
      <div class="system-status">
        <span class="sys-label">SYS : </span>
        <span class="status-indicator"></span>
        <span class="status-text">NOMINAL</span>
      </div>
      <div class="version-info">v0.0.4-BETA</div>
    </div>
  </div>

  <div class="header" id="headerText">üß† MIRAGE Interface v0.0.4-BETA // Loading...</div>
  <div class="chat-box" id="chat">
    <!-- messages will populate here -->
  </div>

  <div id="roomMembersModal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeMembersModal">&times;</span>
      <h3>Room Members: <span id="membersRoomName"></span></h3>
      <div id="roomMembersList" class="members-list">
        <!-- Members will be populated here -->
      </div>
    </div>
  </div>

  <div class="input-box">
    <input type="text" id="input" placeholder="Enter message..." />
    <button onclick="sendMsg()">Send</button>
    <button class="file-upload-btn" onclick="triggerFileUpload()">
      üìé File
      <input type="file" id="fileInput" onchange="handleFileUpload()" />
    </button>
  </div>

  <div class="divergence" onclick="logout()">log out</div>

  <!-- Join Room Modal -->
  <div id="joinRoomModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeJoinModal()">&times;</span>
      <h3>Join Channel</h3>
      <input type="text" id="joinRoomName" placeholder="Channel name" />
      <input type="password" id="joinRoomPassword" placeholder="Password (if private)" />
      <button onclick="joinRoom()">Join</button>
      <div id="joinError" class="error-message"></div>
    </div>
  </div>

  <!-- Create Room Modal -->
  <div id="createRoomModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCreateModal()">&times;</span>
      <h3>Create Channel</h3>
      <input type="text" id="createRoomName" placeholder="Channel name" />
      <label>
        <input type="checkbox" id="isPrivate" /> Private Channel
      </label>
      <input type="password" id="roomPassword" placeholder="Password (required for private)" style="display:none;" />
      <button onclick="createRoom()">Create</button>
      <div id="createError" class="error-message"></div>
    </div>
  </div>

  <!-- Inbox Modal -->
  <div id="inboxModal" class="modal">
    <div class="modal-content inbox-modal">
      <div class="modal-header">
        <h3>üìß Inbox Messages</h3>
        <div class="modal-controls">
          <button onclick="showSendMessageModal()" class="send-btn">Send Message</button>
          <span class="close" onclick="closeInboxModal()">&times;</span>
        </div>
      </div>
      <div id="inboxMessages" class="inbox-messages">
        <!-- Inbox messages will be populated here -->
      </div>
    </div>
  </div>

  <!-- Send Message Modal -->
  <div id="sendMessageModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSendMessageModal()">&times;</span>
      <h3>Send Message</h3>
      <input type="text" id="recipientUsername" placeholder="Recipient username" />
      <textarea id="messageText" placeholder="Enter your message..." rows="4"></textarea>
      <button onclick="sendInboxMessage()">Send</button>
      <div id="sendError" class="error-message"></div>
    </div>
  </div>

  <!-- Download Warning Modal -->
  <div id="downloadWarningModal" class="modal warning-modal">
    <div class="modal-content">
      <span class="close" onclick="closeDownloadWarning()">&times;</span>
      <div class="warning-header">
        <span class="warning-icon">‚ö†Ô∏è</span>
        <h3>Download Warning</h3>
      </div>
      <div class="warning-content">
        <p>You are about to download a file from an external source. Please ensure you trust the sender before
          proceeding.</p>
        <div class="file-info" id="downloadFileInfo">
          <!-- File info will be populated here -->
        </div>
        <div class="disable-warnings">
          <input type="checkbox" id="disableWarnings" />
          <label for="disableWarnings">Don't show this warning again</label>
        </div>
      </div>
      <div class="warning-buttons">
        <button class="btn-cancel" onclick="closeDownloadWarning()">Cancel</button>
        <button class="btn-proceed" onclick="proceedDownload()">Download</button>
      </div>
    </div>
  </div>

  <script src="js/roomjs.js"></script>
</body>

</html>